//============================================================================
// Name        : Driver.cpp
// Author      : Saif Ur Rehman
// ROLL NO     :i22-1697
//============================================================================
#include "header.h"
#include "IOT.h"
#include "Patient.h"
#include "Doctor.h"//decrypt IOT object in accordance to encryption.
void PatientPortal(Patient *P,Doctor * D);			//App for patient use.
void DoctorPortal(Patient *P,Doctor * D);			//App for Doctor Use.
void writepatient(Patient *P,int size);			//Write all patients in patient list file.
Patient *readpatient();						//read all patient from patient list file.
void writeDoctor(Doctor *D,int size);		//write all doctors in Doctor list file.
Doctor * readDoctor();						//read all doctors from doctor list file.					//Write EHR object of Patient and then store using store EHR function..
		//Write IOT object in file at specific path.		//read all IOTs and stores last one.
void callIOTwrite(int index);						//calling function to create specfic path for writing EHR.
void seeEHRtoD(Patient *P,Doctor &D);				//Performs dispalying EHR  functionality to Doctor of specific patient .
void assignDoctors(Patient *P,Doctor *D2);			//function that aggregate doctors to patients.
void EditEHR(Patient *P,Doctor &D);					//Function to allow editing in EHR of patient to doctor according to permission.
void seeIOTtoD(Patient *P,Doctor &D);				//Function to dispaly current IOT data of patient to dotor.
void Mngeappointreq(Patient *P,Doctor &D);
char Doctormenu(Patient *P,Doctor &D);//allow doctor to Perform all acceptance of Appointments of Patients.
void storeEHR(string path,int doc_id,EHR &E);
void MakeCall(Patient *P,Doctor &D);//Store EHR file at specific path.		//takes a single dummy character.
int main() {
//	srand(time(0));
	char Deg[5][255];
	char name[5][255];
			char Password[5][255];
			strcpy(Deg[0],"Doctor of Medicine (Neurology)");
			strcpy(Deg[1],"Doctor of Medicine (Nephrology)");
			strcpy(Deg[2],"Doctor of Medicine (Gynecology)");
			strcpy(Deg[3],"Doctor of Medicine (Urology)");
			strcpy(Deg[4],"Clinical psychology");
			strcpy(name[0],"Dr Shadat");
			strcpy(name[1],"Dr Ibadat");
			strcpy(name[2],"Dr Adalat");
			strcpy(name[3],"Dr Riasat");
			strcpy(name[4],"Dr Sharafat");
			strcpy(Password[0],"d1@123");
			strcpy(Password[1],"d2@123");
			strcpy(Password[2],"d3@123");
			strcpy(Password[3],"d4@123");
			strcpy(Password[4],"d5@123");


			Doctor D[5]={{1,Password[0],name[0],40,Deg[0]},{2,Password[1],name[1],50,Deg[1]},{3,Password[2],name[2],60,Deg[2]},{4,Password[3],name[3],35,Deg[3]}
			,{5,Password[4],name[4],45,Deg[4]}};
//		char contin='Y';
//		EHR E;
//			int arr1[10][5];
//			for(int i=0;i<4;i++)
//			{
//				arr1[0][i]=E.readEHR("/home/safi/Documents/Semester2/OOP/Project/Cloud/Patient1/EHR/EHR"+to_string(i+1)+".dat");
//			}
//			Doctor *D10[5];
//			for(int i=0;i<4;i++)
//			{
//				for(int j=0;j<5;j++)
//				{
//					if(arr1[0][i]==D[j].getDoctorId())
//					{
//						D10[i]=&D[j];
//					}
//				}
//			}
//			Doctor *D11[5];
//			arr1[1][0]=E.readEHR("/home/safi/Documents/Semester2/OOP/Project/Cloud/Patient2/EHR/EHR1.dat");
//			for(int j=0;j<5;j++)
//			{
//				if(arr1[1][0]==D[j].getDoctorId())
//				{
//					D11[0]=&D[j];
//				}
//			}
//			Doctor *D12[5];
//			for(int i=0;i<3;i++)
//			{
//				arr1[2][i]=E.readEHR("/home/safi/Documents/Semester2/OOP/Project/Cloud/Patient3/EHR/EHR"+to_string(i+1)+".dat");
//			}
//			for(int i=0;i<3;i++)
//			{
//				for(int j=0;j<5;j++)
//				{
//					if(arr1[2][i]==D[j].getDoctorId())
//					{
//						D12[i]=&D[j];
//					}
//				}
//			}
//			Doctor *D13[5];
//			for(int i=0;i<5;i++)
//			{
//				arr1[3][i]=E.readEHR("/home/safi/Documents/Semester2/OOP/Project/Cloud/Patient4/EHR/EHR"+to_string(i+1)+".dat");
//			}
//			for(int i=0;i<5;i++)
//			{
//				for(int j=0;j<5;j++)
//				{
//					if(arr1[3][i]==D[j].getDoctorId())
//					{
//						D13[i]=&D[j];
//					}
//				}
//			}
//			Doctor *D14[5];
//			arr1[4][0]=E.readEHR("/home/safi/Documents/Semester2/OOP/Project/Cloud/Patient5/EHR/EHR"+to_string(1)+".dat");
//			for(int j=0;j<5;j++)
//			{
//				if(arr1[4][0]==D[j].getDoctorId())
//				{
//					D14[0]=&D[j];
//				}
//			}
//			Doctor *D15[5];
//			for(int i=0;i<4;i++)
//			{
//				arr1[5][i]=E.readEHR("/home/safi/Documents/Semester2/OOP/Project/Cloud/Patient6/EHR/EHR"+to_string(i+1)+".dat");
//			}
//			for(int i=0;i<4;i++)
//			{
//				for(int j=0;j<5;j++)
//				{
//					if(arr1[5][i]==D[j].getDoctorId())
//					{
//						D15[i]=&D[j];
//					}
//				}
//			}
//			Doctor *D16[5];
//			for(int i=0;i<4;i++)
//			{
//				arr1[6][i]=E.readEHR("/home/safi/Documents/Semester2/OOP/Project/Cloud/Patient7/EHR/EHR"+to_string(i+1)+".dat");
//			}
//			for(int i=0;i<4;i++)
//			{
//				for(int j=0;j<5;j++)
//				{
//					if(arr1[6][i]==D[j].getDoctorId())
//					{
//						D16[i]=&D[j];
//					}
//				}
//			}
//			Doctor *D17[5];
//			for(int i=0;i<2;i++)
//			{
//				arr1[7][i]=E.readEHR("/home/safi/Documents/Semester2/OOP/Project/Cloud/Patient8/EHR/EHR"+to_string(i+1)+".dat");
//			}
//			for(int i=0;i<2;i++)
//			{
//				for(int j=0;j<5;j++)
//				{
//					if(arr1[7][i]==D[j].getDoctorId())
//					{
//						D17[i]=&D[j];
//					}
//				}
//			}
//			Doctor *D18[5];
//			arr1[8][0]=E.readEHR("/home/safi/Documents/Semester2/OOP/Project/Cloud/Patient9/EHR/EHR"+to_string(1)+".dat");
//			for(int j=0;j<5;j++)
//			{
//				if(arr1[8][0]==D[j].getDoctorId())
//				{
//					D18[0]=&D[j];
//				}
//			}
//			Doctor *D19[5];
//			for(int i=0;i<5;i++)
//			{
//				arr1[9][i]=E.readEHR("/home/safi/Documents/Semester2/OOP/Project/Cloud/Patient10/EHR/EHR"+to_string(i+1)+".dat");
//			}
//			for(int i=0;i<5;i++)
//			{
//				for(int j=0;j<5;j++)
//				{
//					if(arr1[9][i]==D[j].getDoctorId())
//					{
//						D19[i]=&D[j];
//					}
//				}
//			}
//			char pass[10]="p1@123";
			cout<<"chk";
			Patient P[10]={
			{1,"p1@123","Sarfraz Ahmed",40,"Mazdoor",4},
			{2,"p2@123","Babar Azam",40,"Chaprasi",1},
			{3,"p3@123","Shadab khan",40,"Mechanic",3},
			{4,"p4@123","Shaheen Afridi",40,"Carpenter",5},
			{5,"p5@123","Naseem Shah",40,"Mazdoor",1},
			{6,"p6@123","Iftikhar Ahmed",40,"Chaprasi",4},
			{7,"p7@123","Muhammad Rizwan",40,"Mechanic",4},
			{8,"p8@123","Fakhar Zaman",40,"Carpenter",2},
			{9,"p9@123","Imad Wasim",40,"Mazdoor",1},
			{10,"p10@123","Imam-Ul-Haq",40,"Chaprasi",5}
			};
//			for(int i=0;i<10;i++)
//			{
//				for(int j=0;j<P[i].getIndexdoctor();j++)
//				{
//					P[i].setDocIds(arr1[i][j], j);// Initialize a variable to store the user's choice to continue.	// Read in all Doctor objects.
//				}
//			}
//		writepatient(P,10);
//		writeDoctor(D,5);// Seed the random number generator with the current time
//	Doctor *D2=readDoctor();
//	Patient *P1;			// Declare a pointer to a Patient object.
//	P1=readpatient();// Read in all Patient objects.
//	assignDoctors(P1,D2);// assign doctors to each patient.
//	int choice_usr;				// Initialize variables for user input and file paths.
//	string path="/home/safi/Documents/Semester2/OOP/Project/Cloud/Patient";
//	EHR temp;
//	// Read in electronic health records (EHR) for each patient and doctor combination.
//	for(int i=0;i<10;i++)
//	{
//		path=path+to_string(i+1)+"/EHR/EHR";
//		for(int j=0;j<P1[i].getIndexdoctor();j++)
//		{
//			path=path+to_string(j+1)+".dat";
//			temp.readEHR(path);
//			P1[i].getEHR(j)=temp;
//			path="/home/safi/Documents/Semester2/OOP/Project/Cloud/Patient";
//			path=path+to_string(i+1)+"/EHR/EHR";
//		}
//		path="/home/safi/Documents/Semester2/OOP/Project/Cloud/Patient";
//	}
//	path="/home/safi/Documents/Semester2/OOP/Project/Cloud/Patient";
//	IOT I1;
//	// Read in internet of things (IOT) data for each patient.
//	for(int i=0;i<10;i++)
//	{
//		path=path+to_string(i+1)+"/IOT.dat";
//		I1.readIOT(path,0);
//		path="/home/safi/Documents/Semester2/OOP/Project/Cloud/Patient";
//	}
//	char contin='y';
//	// Display a welcome message and prompt the user for their choice.
//	cout<<"\nWelcome to RMC System.....\n";
//	while(contin=='Y'|| contin=='y')
//	{
//		cout<<"\nEnter Your choice: \n1.Patient\n2.Doctor\n";
//		cin>>choice_usr;
//		while(choice_usr<1 && choice_usr>2)
//		{
//			cout<<"\nInvalid Input!try again:";
//			cin>>choice_usr;
//		}
//		switch(choice_usr)
//		{
//		case 1:
//			PatientPortal(P1,D2);	// Call the PatientPortal function and pass in the Patient and Doctor object.
//
//			break;
//		case 2:
//			DoctorPortal(P1,D2);	// Call the DoctorPortal function and pass in the Patient and Doctor objects.
//			break;
//		}
//		// Prompt the user to continue or quit the program
//		cout<<"\nWelcome Back to RMC portal...\nDo you wnat to continue?(Y/N):";
//		cin>>contin;
//		while(contin!='Y' && contin!='y' && contin!='N' && contin!='n')
//		{
//			cout<<"\nInvalid Character !Enter Again:";
//			cin>>contin;
//		}
//	}
//
//	// Write out the IOT data for each patient.
//	for(int i=0;i<10;i++)
//	{
//		callIOTwrite(i);
//	}
//	// Write out the EHR data for each patient and doctor combination
//	path="/home/safi/Documents/Semester2/OOP/Project/Cloud/Patient";
//	for(int i=0;i<10;i++)
//	{
//		path=path+to_string(i+1)+"/EHR/EHR";
//		for(int j=0;j<P1[i].getIndexdoctor();j++)
//		{
//			path=path+to_string(j+1)+".dat";
//			storeEHR(path,P1[i].getDocIds(j),P1[i].getEHR(j));
//			path=path+to_string(i+1)+"/EHR/EHR";
//		}
//		path="/home/safi/Documents/Semester2/OOP/Project/Cloud/Patient";
//	}
//	writepatient(P1,10);		//write all patient objects.
//	writeDoctor(D2,5);			//write all doctor objects.
//}
